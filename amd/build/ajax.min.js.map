{"version":3,"sources":["../src/ajax.js"],"names":["define","$","init","import_excel","on","console","log","ajax","url","type","data","M","cfg","sesskey","success","result","showDetails","displayName","html","installPath","parent","find","version","release","uses","frankenstyle","show","hide","closeDetails","getCourseAdmins","displayname","pluginname","attr","plugintype","initFunctions","document","ready"],"mappings":"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","sourcesContent":["define(['jquery', 'jqueryui'], function($) {\n    /* eslint no-console: [\"error\", { allow: [\"log\", \"warn\", \"error\"] }] */\n    return {\n        init: function() {\n            var import_excel = function() {\n                $(\"#import-excel\").on('click', function() {\n                    console.log('importing excel data here...');\n\n                    $.ajax({\n                        url: \"ajax/import_excel.php\",\n                        type: \"POST\",\n                        data: {\n                            'sesskey': M.cfg.sesskey\n                        },\n                        success: function(result) {\n                            console.log(result);\n                        }\n                    });\n                });\n            };\n\n            var showDetails = function() {\n                $('.displayname').on('click', function() {\n                    var displayName = $(this).html();\n                    var installPath = $(this).parent().find('.rootdir').html();\n                    var version = $(this).parent().find('.versiondb').html();\n                    var release = $(this).parent().find('.release').html();\n                    var uses = $(this).parent().find('.uses').html();\n                    var frankenstyle = $(this).parent().find('.frankenstyle').html();\n                    console.log('==> clicking displayname ' + displayName);\n\n                    $.ajax({\n                        url: \"ajax/plugin_details.php\",\n                        type: \"POST\",\n                        data: {\n                            'displayname': displayName,\n                            'installpath': installPath,\n                            'version': version,\n                            'release': release,\n                            'uses': uses,\n                            'frankenstyle': frankenstyle,\n                            'sesskey': M.cfg.sesskey\n                        },\n                        success: function(result) {\n                            $('#details').html(result);\n                            $('.details').show();\n                            $('.plugins').hide();\n                        }\n                    });\n\n                });\n            };\n\n            var closeDetails = function() {\n                $('#close-details').on('click', function() {\n                   $('.details').hide();\n                   $('.plugins').show();\n                });\n            };\n\n            var getCourseAdmins = function() {\n                $('.uses').on('click', function() {\n                    var displayname = $(this).parent().find('.displayname').html();\n                    var pluginname = $(this).parent().attr('pluginname');\n                    var plugintype = $(this).parent().attr('type');\n                    console.log('pluginname: ' + pluginname);\n                    console.log('plugintype: ' + plugintype);\n                    $.ajax({\n                        url: \"ajax/list_admins.php\",\n                        type: \"POST\",\n                        data: {\n                            'displayname': displayname,\n                            'pluginname': pluginname,\n                            'plugintype': plugintype,\n                            'sesskey': M.cfg.sesskey\n                        },\n                        success: function(result) {\n                            $('#details').html(result);\n                            $('.details').show();\n                            $('.plugins').hide();\n                        }\n                    });\n\n                });\n            };\n\n            /**\n             * Initialize all functions\n             */\n            var initFunctions = function() {\n                showDetails();\n                closeDetails();\n                getCourseAdmins();\n                import_excel();\n            };\n\n\n            /**\n             * The document is ready\n             */\n            $(document).ready(function() {\n                console.log('=================< reports_plugins/ajax.js >=================');\n                initFunctions();\n            });\n        }\n    };\n});\n"],"file":"ajax.min.js"}